<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Wizualizacja inspekcji</title>
    <style>
        body { font-family: Arial, sans-serif; }
        .gallery img { max-width: 200px; margin: 5px; border: 1px solid #ccc; }
        .bad-gallery img { max-width: 150px; margin: 5px; border: 2px solid red; }
    </style>
</head>
<body>
    <h1>Wszystkie zdjęcia</h1>
    <div class="gallery">
        {% for img in all_images %}
            <img src="{{ url_for('static', filename='img/new_images/' + img) }}" alt="{{ img }}">
        {% endfor %}
    </div>

    <h2>Ostatnie 5 zdjęć innych niż "good"</h2>
    <div id="bad-gallery" class="bad-gallery">
        {% for img in last_bad_images %}
            <img src="{{ url_for('static', filename='img/new_images/' + img) }}" alt="{{ img }}">
        {% endfor %}
    </div>

    <script>
        function refreshBadImages() {
            fetch('/get_bad_images')
                .then(response => response.json())
                .then(data => {
                    const gallery = document.getElementById('bad-gallery');
                    gallery.innerHTML = '';
                    data.forEach(img => {
                        const imageElement = document.createElement('img');
                        imageElement.src = '/static/img/new_images/' + img + '?t=' + new Date().getTime();
                        gallery.appendChild(imageElement);
                    });
                });
        }

        // Odświeżanie co 2 sekundy
        setInterval(refreshBadImages, 2000);
    </script>
</body>
</html>
